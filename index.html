<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Цена акции СБЕР</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 30px;
      background: #f5f5f5;
    }
    h2 {
      margin-bottom: 20px;
    }
    #price {
      font-size: 28px;
      color: #2e7d32;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Цена акции <span id="ticker-label">SBER</span> (Мосбиржа)</h2>
  <div id="price">Загрузка...</div>

  <script>
    async function fetchMOEXPrice(ticker) {
      const url = `https://iss.moex.com/iss/engines/stock/markets/shares/securities/${ticker}.json`;
      try {
        const response = await fetch(url);
        const data = await response.json();

        // Цена последней сделки берётся из MARKETDATA -> LAST
        const lastPrice = data.marketdata.data[0][8]; // индекс 8 = LAST
        document.getElementById('price').textContent = `${lastPrice} ₽`;
      } catch (error) {
        console.error('Ошибка при загрузке:', error);
        document.getElementById('price').textContent = 'Ошибка загрузки';
      }
    }

    const ticker = 'SBER'; // можно заменить на 'GAZP', 'LKOH', и др.
    document.getElementById('ticker-label').textContent = ticker;
    fetchMOEXPrice(ticker);
  </script>
</body>
</html>
